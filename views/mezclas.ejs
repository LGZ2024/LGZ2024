<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Mezclas</title>
    <!-- bootstrap -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->
    <link href="https://cdn.datatables.net/v/bs5/jszip-3.10.1/b-3.0.2/b-colvis-3.0.2/b-html5-3.0.2/b-print-3.0.2/date-1.5.2/r-3.0.2/datatables.css" rel="stylesheet">
    <!--estilos de datatable-->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.0.8/css/dataTables.bulma.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/2.0.3/css/select.bulma.css">

    <!-- material desing -->
    <link rel="stylesheet" type="text/css" href="../vendor/mdi/css/materialdesignicons.min.css">
    <!-- toastify -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <!-- mis estilo -->
    <link rel="stylesheet" type="text/css" href="../css/mezclas.css">

</head>


<body>
    <header>
        <div class="contenedor">
            <a class="logo" id="inicio"></a>
            <nav>
                <a id="cerrarSesion">Cerrar sesion</a>
            </nav>
        </div>
        <!-- <nav class="navbar bg-body-tertiary fixed-top ">
            <div class="container-fluid">
                <a class="navbar-brand" id="inicio"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                    aria-labelledby="offcanvasNavbarLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Offcanvas</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="cerrarSesion">Cerrar sesion</a>
                            </li>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav> -->
    </header>


    <section id="opciones" class="opciones" style="display: none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col-4">
                    <h3>Opciones</h3>
                </div>
            </div>
            <hr>
            <div class="group-button">
                <button type="button" id="solicitar">Solicitar</button>
                <button type="button" id="buscar">Mezclas Solicitadas</button>
                <button type="button" id="preparadas">Mezclas Preparadas</button>
            </div>
        </div>
    </section>


    <!--seccion de almacen mezclas  -->
    <!--interface de solicitud de viaje y estado de viaje y finalizar viaje -->
    <section id="opciones-almacen" class="opciones" style="display: none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col-4">
                    <h3>Opciones</h3>
                </div>
            </div>
            <hr>
            <div class="group-button">
                <button type="button" id="btnTablaSolicidata">Mezclas Solicitadas</button>
                <button type="button" id="btnTablaPreparadas">Mezclas Preparadas</button>
                <button type="button" id="btnTablaEntragadas">Mezclas Entregadas</button>
            </div>
        </div>
    </section>


    <!--seccion de visualizador  -->
    <!--interface de solicitud de viaje y estado de viaje y finalizar viaje -->
    <section id="opciones-visual" class="opciones" style="display: none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col-4">
                    <h3>Opciones</h3>
                </div>
            </div>
            <hr>
            <div class="group-button">
                <button type="button" id="btnTablaSolicidataV">Mezclas Solicitadas</button>
                <button type="button" id="btnTablaPreparadasV">Mezclas Preparadas</button>
                <button type="button" id="btnTablaEntragadasV">Mezclas Entregadas</button>
            </div>
        </div>
    </section>


    <!-- seccion de usuario miguel mora, este usuario puede realizar peticione a 
        bioagricultura, pero puede ver las solicitudes de morras ballas y bioagricultura-->
    <!--interface de solicitud de viaje y estado de viaje y finalizar viaje -->
    <section id="opciones-visual-solicita" class="opciones" style="display:none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col-4">
                    <h3>Opciones</h3>
                </div>
            </div>
            <hr>
            <div class="group-button">
                <button type="button" id="solicitarM">Solicitar</button>
                <button type="button" id="solicitudesM">Mezclas Solicitadas</button>
                <button type="button" id="preparadasM">Mezclas Preparadas</button>
                <button type="button" id="EntregadasM">Mezclas Entregada</button>
            </div>
        </div>
    </section>






    <!-- seccion de formularios -->
    <!--formulario para realizar solicitudes-->
    <section id="SecMesclaz" class="formularios" style="display: none;">
        <div class="contenedor">
            <div class="form">
                <div class="card">
                    <div class="titulo">
                        <div class="col">
                            <button id="regresar"><span class="mdi mdi-arrow-left-bold"></span></button>
                        </div>
                        <div class="col-3">
                            <h3>Solicitar Mezcla</h3>
                        </div>
                    </div>
                    <hr>
                    <div class="form-group">
                        <label for="fecha">Fecha de solicitud</label>
                        <input type="datetime-local" class="form-control" name="fecha" id="fecha">
                    </div>
                    <div class="form-group">
                        <label for="rancho">Rancho destino</label>
                        <select id="rancho" class="form-select">
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="centroCoste">Centro de coste</label>
                        <select id="centroCoste" class="form-select">
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="variedad">Variedades</label>
                        <select id="variedad" class="form-select">
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="folio">Folio de receta</label>
                        <input type="text" id="folio" class="form-control" placeholder="Folio de receta">
                    </div>
                    <div class="form-group">
                        <label for="temporada">Temporada</label>
                        <select id="temporada" class="form-select">
                            <option value="">Seleciona una opcion</option>
                            <option value="Julio23-Junio24">Julio23-Junio24</option>
                            <option value="Julio24-Junio25">Julio24-Junio25</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cantidad">Cantidad de mezcla</label>
                        <input type="text" id="cantidad" class="form-control" placeholder="Cantidad de mezcla">
                    </div>
                    <div class="form-group">
                        <label for="presentacion">Presnetacion de mezcla</label>
                        <select id="presentacion" class="form-select">
                            <option value="">Seleciona una opcion</option>
                            <option value="Willi">Willi</option>
                            <option value="Barril">Barril</option>
                            <option value="Garrafa">Garrafa</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="metodoAplicacion">Metodo de Aplicacion</label>
                        <select id="metodoAplicacion" class="form-select">
                            <option value="">seleciona una opcion</option>
                            <option value="Foliar">Foliar</option>
                            <option value="Drench">Drench</option>
                            <option value="Trampeo">Trampeo</option>
                            <option value="Hervicida">Hervicida</option>
                            <option value="Termonebulizacion">Termonebulizacion</option>
                            <option value="Filtro">Filtro</option>
                            <option value="Riego">Riego</option>
                            <option value="Preparacion de Tierras">Preparacion de Tierras</option>
                            <option value="Enmienda">Enmienda</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="descripcion">Descripción</label>
                        <textarea name="descripcion" id="descripcion" class="form-control"
                            placeholder="descripcion"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="fileInput">Imagen producto</label>
                        <input type="text" id="fileInput" hidden>
                        <br>
                        <select name="listaDeDispositivos" id="listaDeDispositivos"></select>
                        <button class="btnTomarFoto">Tomar foto</button>
                        <button class="btnOtraFoto" style="display: none;">Tomar otra foto</button>
                        <p id="estado"></p>
                        <video muted="muted" id="video"></video>
                        <canvas id="canvas" style="display: none;">
                            <img src="" alt="" class="photo">
                        </canvas>
                    </div>
                    <div class="form-group">
                        <button id="btnSolicitar">Solicitar</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="formPreparadas" class="formularios" style="display: none;">
        <div class="form">
            <div class="card">
                <div class="titulo">
                    <div class="col">
                        <button id="regresaPrepa"><span class="mdi mdi-arrow-left-bold"></span></button>
                    </div>
                    <div class="col-3">
                        <h3>Mesclas Solicitadas</h3>
                    </div>
                </div>
                <hr>
                <div class="form-group">
                    <label for="folioi">Folio de Receta</label>
                    <input type="text" class="form-control" id="folioi" disabled>
                </div>
                <div class="form-group">
                    <label for="solicitai">Solicita</label>
                    <input type="text" class="form-control" id="solicitai" disabled>
                </div>
                <div class="form-group">
                    <label for="fechai">Fecha de Solicitud</label>
                    <input type="text" class="form-control" id="fechai" disabled>
                </div>
                <div class="form-group">
                    <label for="ranchoi">Rancho Destino</label>
                    <input type="text" class="form-control" id="ranchoi" disabled>
                </div>
                <div class="form-group">
                    <label for="centroCostei">Centro de coste</label>
                    <input type="text" class="form-control" id="centroCostei" disabled>
                </div>
                <div class="form-group">
                    <label for="variedadi">Variedad</label>
                    <input type="text" class="form-control" id="variedadi" disabled>
                </div>
                <div class="form-group">
                    <label for="empresai">Empresa</label>
                    <input type="text" class="form-control" id="empresai" disabled>
                </div>
                <div class="form-group">
                    <label for="temporadai">Temporada</label>
                    <input type="text" class="form-control" id="temporadai" disabled>
                </div>
                <div class="form-group">
                    <label for="cantidadi">Cantidad de producto</label>
                    <input type="text" class="form-control" id="cantidadi" disabled>
                </div>
                <div class="form-group">
                    <label for="presentacioni">Presentacion</label>
                    <select id="presentacioni" class="form-select" disabled>
                        <option value="">Seleciona una opcion</option>
                        <option value="Willi">Willi</option>
                        <option value="Barril">Barril</option>
                        <option value="Garrafa">Garrafa</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="metodoi">Metodo de aplicacion</label>
                    <select id="metodoi" class="form-select" disabled>
                        <option value="">seleciona una opcion</option>
                        <option value="Foliar">Foliar</option>
                        <option value="Drench">Drench</option>
                        <option value="Trampeo">Trampeo</option>
                        <option value="Hervicida">Hervicida</option>
                        <option value="Termonebulizacion">Termonebulizacion</option>
                        <option value="Filtro">Filtro</option>
                        <option value="Riego">Riego</option>
                        <option value="Preparacion de Tierras">Preparacion de Tierras</option>
                        <option value="Enmienda">Enmienda</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="descripcioni">Descripcion</label>
                    <input type="text" class="form-control" id="descripcioni" disabled>
                </div>
                <div class="form-group">
                    <label>Imagen producto</label>
                    <div id="imageList"></div>
                </div>
                <div class="form-group">
                    <label for="notaMezcla">Nota de mezclador</label>
                    <textarea id="notaMezcla" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <button type="button" class="btnform" id="btnGuardarMescla">Guardar mescla</button>
                </div>
            </div>
        </div>
    </section>

    <section id="formCerrar" class="formularios" style="display: none;">
        <div class="form">
            <div class="card">
                <div class="titulo">
                    <div class="col">
                        <button id="regresarCerrar"><span class="mdi mdi-arrow-left-bold"></span></button>
                    </div>
                    <div class="col-3">
                        <h3>Cerrar Mezcla</h3>
                    </div>
                </div>
                <hr>
                <div class="form-group">
                    <label for="folioReceta">Folio</label>
                    <input type="text" class="form-control" id="folioReceta" readonly>
                </div>
                <div class="form-group">
                    <label for="imagenEntrega">Imagen</label>
                    <input type="text" id="imagenEntrega" class="form-control" hidden>
                    <br>
                    <select name="listaDeDispositivosC" id="listaDeDispositivosC"></select>
                    <button class="btnTomarFotoCerrar">Tomar foto</button>
                    <button class="btnOtraFotoCerrar" style="display: none;">Tomar otra foto</button>
                    <p id="estadoC"></p>
                    <video muted="muted" id="videoC"></video>
                    <canvas id="canvasC" style="display: none;">
                        <img src="" alt="" class="photoC">
                    </canvas>
                </div>
                <div class="form-group">
                    <button id="btnEntregada">Cerras Mezcla</button>
                </div>
            </div>
        </div>
    </section>



    <!-- secciones de tablas  -->
    <!-- tabla de mezclas general -->
    <section id="tabladeMezclas" class="tablas" style="display: none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col">
                    <button id="regresar1"><span class="mdi mdi-arrow-left-bold"></span></button>
                </div>
                <div class="col-3">
                    <h3> Tabla de Mezclas</h3>
                </div>
            </div>
            <hr>
            <table id="myTable" class="table is-striped" >
                <thead>
                    <tr>
                        <th>Solicita</th>
                        <th>Fecha de Solicitud</th>
                        <th>Rancho destino</th>
                        <th>Empresa</th>
                        <th>Centro de Coste</th>
                        <th>Variedad</th>
                        <th>Folio</th>
                        <th>Temporada</th>
                        <th>Cantidad de Producto</th>
                        <th>Presentacion de Producto</th>
                        <th>Metodo de Aplicacion</th>
                        <th>Descripcion</th>
                        <th>status</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </section>
    <!-- tabla de mezclas en preparacion -->
    <section id="tabladeMezclasPreparacion" class="tablas" style="display: none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col">
                    <button id="regresar2"><span class="mdi mdi-arrow-left-bold"></span></button>
                </div>
                <div class="col-3">
                    <h3>Tabla de Mezclas en Preparacion</h3>
                </div>
            </div>
            <hr>
            <table id="myTablePreparacion" class="table is-striped" >
                <thead>
                    <tr>
                        <th>Solicita</th>
                        <th>Nota de almacen</th>
                        <th>Fecha de Solicitud</th>
                        <th>Rancho destino</th>
                        <th>Empresa</th>
                        <th>Centro de Coste</th>
                        <th>Variedad</th>
                        <th>Folio</th>
                        <th>Temporada</th>
                        <th>Cantidad de Producto</th>
                        <th>Presentacion de Producto</th>
                        <th>Metodo de Aplicacion</th>
                        <th>Descripcion</th>
                        <th>status</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </section>
    <!-- tabla de mezclas entregadas -->
    <section id="tabladeMezclasEntregadas" class="tablas" style="display: none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col">
                    <button id="regresarE"><span class="mdi mdi-arrow-left-bold"></span></button>
                </div>
                <div class="col-3">
                    <h3>Tabla de Mezclas entregadas
                    </h3>
                </div>
            </div>
            <hr>
            <table id="myTableEntregada" class="table is-striped" >
                <thead>
                    <tr>
                        <th>Solicita</th>
                        <th>Fecha de Solicitud</th>
                        <th>Rancho destino</th>
                        <th>Empresa</th>
                        <th>Centro de Coste</th>
                        <th>Variedad</th>
                        <th>Folio</th>
                        <th>Temporada</th>
                        <th>Cantidad</th>
                        <th>Presentacion</th>
                        <th>Aplicacion</th>
                        <th>Descripcion</th>
                        <th>Solicitud</th>
                        <th>Nota de almacen</th>
                        <th>Entrega</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </section>
    <!-- tabla de mezclas con acciones -->
    <section id="MezclasSolicitadas" class="tablas" style="display: none;">
        <div class="contenedor">
            <div class="titulo">
                <div class="col">
                    <button id="regresarS"><span class="mdi mdi-arrow-left-bold"></span></button>
                </div>
                <div class="col-3">
                    <h3> Tabla de Mezclas</h3>
                </div>
            </div>
            <hr>
            <!-- class="display table table-striped table-bordered table-hover table-sm table-compac" -->
            <table id="tablaMesclaSolicitada" class="table is-striped" >
                <thead>
                    <tr>
                        <th>Solicita</th>
                        <th>Fecha de Solicitud</th>
                        <th>Rancho destino</th>
                        <th>Empresa</th>
                        <th>Centro de Coste</th>
                        <th>Folio</th>
                        <th>Temporada</th>
                        <th>Cantidad de Producto</th>
                        <th>Presentacion de Producto</th>
                        <th>Metodo de Aplicacion</th>
                        <th>Descripcion</th>
                        <th>status</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
    <!--funciones de data table-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script
        src="https://cdn.datatables.net/v/bs5/jszip-3.10.1/b-3.0.2/b-colvis-3.0.2/b-html5-3.0.2/b-print-3.0.2/date-1.5.2/r-3.0.2/datatables.js"></script>
    <!-- boostrap -->
    <!--     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script> -->
    <!--fontaWesome  -->
    <script src="https://kit.fontawesome.com/c656def1ce.js" crossorigin="anonymous"></script>
    <!-- toastify -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <!-- Firebase Configuración y funciones -->
    <script src="../js/inicioC.js" type="module"></script>
</body>

</html>
<script type="module">
    import { abrirMezcla } from "../js/inicioC.js";

    const mezcla = (u) => {
        abrirMezcla(u)
    }

    const entregar = (u) => {
        document.getElementById('folioReceta').value = u;
        document.getElementById('MezclasSolicitadas').style.display = "none";
        document.getElementById('formCerrar').style.display = "block";
    }

    window.entregar = entregar;
    window.mezcla = mezcla; // Exportar la función al objeto global window
</script>